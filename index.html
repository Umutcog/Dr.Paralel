<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AV: DR. PARALEL - B√ñL√úM 1 V12.2</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; padding: 0; background: #000; color: #0f0; font-family: 'VT323', monospace; overflow: hidden; transition: background-color 1s ease; }
        .scanlines { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 999; background: linear-gradient(rgba(18,16,16,0) 50%, rgba(0,0,0,0.1) 50%), linear-gradient(90deg, rgba(255,0,0,0.03), rgba(0,255,0,0.01), rgba(0,0,255,0.03)); background-size: 100% 3px, 3px 100%; }
        
        #terminal { width: 95vw; height: 95vh; margin: 2.5vh auto; border: 2px solid #0f0; background: rgba(5, 5, 5, 0.9); display: flex; flex-direction: column; position: relative; box-shadow: 0 0 20px #0f0; }
        
        #chase-status { background: rgba(17, 17, 17, 0.9); border-bottom: 2px solid #0f0; padding: 15px; display: flex; align-items: center; justify-content: space-between; font-size: 20px; }
        .distance-bar { flex: 1; height: 12px; background: #222; margin: 0 25px; position: relative; border: 1px solid #0f0; }
        #player-icon { position: absolute; left: 0%; top: -12px; font-size: 28px; transition: left 0.8s ease-in-out; z-index: 5; }
        #dr-icon { position: absolute; left: 100%; top: -12px; font-size: 28px; color: #f00; transform: translateX(-100%); z-index: 4; }

        .screen { flex: 1; overflow-y: auto; padding: 30px; position: relative; }
        .dr-message { color: #f00; font-size: 24px; margin-bottom: 20px; font-style: italic; border-bottom: 1px dashed #f00; padding-bottom: 15px; }
        .mission-log { font-size: 28px; line-height: 1.3; margin-bottom: 25px; color: #eee; }
        
        .clue-box { color: #00f3ff; border: 1px solid #00f3ff; padding: 15px; margin-top: 15px; background: rgba(0, 243, 255, 0.1); font-size: 20px; }
        .meb-hint { color: #ff00ff; font-weight: bold; margin-top: 10px; display: block; }

        .action-zone { margin-top: 30px; }
        .choice-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        button { background: #000; border: 2px solid #0f0; color: #0f0; padding: 15px; font-family: 'VT323'; font-size: 24px; cursor: pointer; text-transform: uppercase; }
        button:hover { background: #0f0; color: #000; }
        
        .input-group { display: flex; gap: 10px; }
        input { flex: 1; background: #000; border: 2px solid #0f0; color: #0f0; font-family: 'VT323'; font-size: 30px; padding: 12px; outline: none; }
        .send-btn { background: #0033cc; color: #fff; border: 2px solid #fff; padding: 0 30px; cursor: pointer; }

        .skip-btn { border-color: #f00; color: #f00; margin-top: 40px; width: 100%; font-size: 20px; }

        #start-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
    </style>
</head>
<body>

<div class="scanlines"></div>

<div id="start-overlay">
    <h1 style="font-size: 60px; color: #f00;">// OPERATION: NEBULA //</h1>
    <p style="font-size: 28px; max-width: 700px; margin-bottom: 40px;">Dr. Paralel d√ºnya iklim sistemini bozdu ve ka√ßƒ±yor. ≈ûifreleri √ß√∂z ve onu yakala!</p>
    <button onclick="startChase()" style="font-size: 45px; padding: 20px 70px;">[ Sƒ∞STEME Gƒ∞R ]</button>
</div>

<div id="terminal">
    <div id="chase-status">
        <span>AJAN: ENKA</span>
        <div class="distance-bar">
            <div id="player-icon">üïµÔ∏è</div>
            <div id="dr-icon">üòà</div>
        </div>
        <span id="dist-text">MESAFE: 100 KM</span>
    </div>

    <div class="screen">
        <div id="dr-msg" class="dr-message"></div>
        <div id="mission-text" class="mission-log"></div>
        <div id="clue-box" class="clue-box"></div>
        <div id="interactive-area" class="action-zone"></div>
        <button id="skip-btn" class="skip-btn" onclick="letDrEscape()">[!] G√ñREVƒ∞ ATLA (DR. PARALEL UZAKLA≈ûIR -50 KM)</button>
    </div>
</div>

<script>
    let currentStep = 0;
    let distance = 100;

    function normalizeT(s) {
        if(!s) return "";
        return s.toUpperCase().replace(/ƒ∞/g,"I").replace(/≈û/g,"S").replace(/ƒû/g,"G").replace(/√ú/g,"U").replace(/√ñ/g,"O").replace(/√á/g,"C").trim();
    }

    const tasks = [
        { 
            dr: "Hava yarƒ±n yaƒümurlu olacak dedim ve ka√ßtƒ±m! Bu kadar basit bir sistemde beni asla bulamazsƒ±n!", 
            text: "Dr. Paralel 'Hava yarƒ±n yaƒümurlu' diyerek iklimi basitle≈ütirdi. O anki anlƒ±k durumun ger√ßek adƒ±nƒ± sisteme gir.", 
            ans: "HAVA DURUMU", 
            type: "input", 
            meb: "Hava olaylarƒ±nƒ±n dar bir alandaki anlƒ±k/kƒ±sa s√ºreli hali.",
            bg: "#1a1a1a"
        },
        { 
            dr: "Bile≈üen sistemini hackledim! Atmosfer ve hidrosfer dƒ±≈üƒ±nda hi√ßbir ≈üey bƒ±rakmadƒ±m!", 
            text: "Atmosfer ve hidrosfer yerinde duruyor. Kalan 3 temel bile≈üeni gir. (√ñRN: Lƒ∞TOSFER, Bƒ∞YOSFER, KRƒ∞YOSFER)", 
            ans: ["KRƒ∞YOSFER", "Lƒ∞TOSFER", "Bƒ∞YOSFER"], 
            type: "match_all", 
            meb: "MEB Kitabƒ± Sayfa 91",
            bg: "#0d210d"
        },
        { 
            dr: "Kuzey Yarƒ±m K√ºre'ye saptƒ±m! Okyanus akƒ±ntƒ±larƒ± bile benden yana!", 
            text: "Kuzey Yarƒ±m K√ºre'de okyanus akƒ±ntƒ±larƒ± hangi y√∂ne sapar?", 
            ans: "SAƒû", 
            type: "choice", 
            opts: ["SAƒû", "SOL"], 
            meb: "MEB Kitabƒ± Sayfa 100",
            bg: "#001a33"
        },
        { 
            dr: "Buzullarƒ±n o me≈ühur yansƒ±tma g√ºc√ºn√º emdim!", 
            text: "Kutup b√∂lgelerindeki beyaz y√ºzeylerin g√ºne≈ü ƒ±≈üƒ±ƒüƒ±nƒ± geri yansƒ±tma kapasitesini onar.", 
            ans: "ALBEDO", 
            type: "input", 
            meb: "MEB Kitabƒ± Sayfa 93",
            bg: "#2d2d2d"
        },
        { 
            dr: "En hayati verileri sildim! Atmosferin kalbine ula≈ütƒ±m!", 
            text: "Su buharƒ±nƒ±n tamamƒ±nƒ±n bulunduƒüu tabaka hangisidir?", 
            ans: "TROPOSFER", 
            type: "input", 
            meb: "MEB Kitabƒ± Sayfa 94",
            bg: "#1a0f00"
        },
        { 
            dr: "G√ºne≈ü'in zararlƒ± ƒ±≈üƒ±nlarƒ±nƒ± √ºzerinize salƒ±yorum!", 
            text: "Ozon gazƒ±nƒ±n bulunduƒüu atmosfer tabakasƒ±nƒ± koruma altƒ±na al.", 
            ans: "STRATOSFER", 
            type: "choice", 
            opts: ["STRATOSFER", "MEZOSFER"], 
            meb: "MEB Kitabƒ± Sayfa 94",
            bg: "#1a0033"
        },
        { 
            dr: "Hƒ±zƒ±ma bak! Arkamda sadece yanan g√∂k ta≈ülarƒ± bƒ±rakƒ±yorum!", 
            text: "G√∂k ta≈ülarƒ±nƒ±n par√ßalandƒ±ƒüƒ± bu katmanƒ±n ismini gir.", 
            ans: "MEZOSFER", 
            type: "input", 
            meb: "MEB Kitabƒ± Sayfa 94",
            bg: "#330000"
        },
        { 
            dr: "Kutup ƒ±≈üƒ±klarƒ±nƒ± karartacaƒüƒ±m!", 
            text: "Aurora ƒ±≈üƒ±klarƒ±nƒ±n olu≈ütuƒüu katmanƒ± tespit et.", 
            ans: "TERMOSFER", 
            type: "input", 
            meb: "MEB Kitabƒ± Sayfa 94",
            bg: "#003322"
        },
        { 
            dr: "Artƒ±k atmosferin bile dƒ±≈üƒ±ndayƒ±m!", 
            text: "Atmosferin uzaya a√ßƒ±lan en dƒ±≈ü katmanƒ± onar.", 
            ans: "EKZOSFER", 
            type: "input", 
            meb: "MEB Kitabƒ± Sayfa 94",
            bg: "#000000"
        },
        { 
            dr: "G√∂rd√ºƒü√ºn fotoƒüraflar her ≈üeyi anlatƒ±yor!", 
            text: "Isƒ±nmak yerine herkes mont giymeye ba≈üladƒ±ysa Dr. Paralel hangi y√∂ne gitmi≈ütir?", 
            ans: "KUZEYE", 
            type: "choice", 
            opts: ["KUZEYE", "G√úNEYE"], 
            meb: "MEB Kitabƒ± Sayfa 96",
            bg: "#001a1a"
        }
    ];

    function startChase() {
        document.getElementById('start-overlay').style.display = 'none';
        loadScene(0);
    }

    function loadScene(idx) {
        if (idx >= tasks.length) { 
            document.body.style.backgroundColor = "#000";
            document.getElementById('dr-msg').innerText = "DR. PARALEL: 'Seni ≈üimdilik atlattƒ±m ama d√∂neceƒüim!'";
            document.getElementById('mission-text').innerText = "TEBRƒ∞KLER AJAN! Bƒ∞Rƒ∞NCƒ∞ B√ñL√úM√ú TAMAMLADIN. DR. PARALEL'ƒ∞ K√ñ≈ûEYE SIKI≈ûTIRIYORUZ. ≈ûƒ∞MDƒ∞ SIRADAKƒ∞ B√ñL√úM ƒ∞√áƒ∞N SAYFA NUMARALARI BEKLENƒ∞YOR.";
            document.getElementById('interactive-area').innerHTML = "";
            document.getElementById('clue-box').style.display = 'none';
            return; 
        }
        
        currentStep = idx;
        const t = tasks[idx];
        
        // ARKA PLAN RENGƒ∞Nƒ∞ G√úNCELLE
        document.body.style.backgroundColor = t.bg;
        
        document.getElementById('dr-msg').innerText = `DR. PARALEL: "${t.dr}"`;
        document.getElementById('mission-text').innerHTML = `> G√ñREV: ${t.text}`;
        
        const cb = document.getElementById('clue-box');
        cb.innerHTML = `[!] ƒ∞PUCU: ${t.meb}`;
        
        const area = document.getElementById('interactive-area');
        area.innerHTML = '';

        if (t.type === "choice") {
            const row = document.createElement('div');
            row.className = "choice-row";
            t.opts.forEach(o => {
                const b = document.createElement('button');
                b.innerText = o;
                b.onclick = () => checkAns(o);
                row.appendChild(b);
            });
            area.appendChild(row);
        } else {
            const group = document.createElement('div');
            group.className = "input-group";
            const inp = document.createElement('input');
            inp.id = "user-ans";
            inp.placeholder = "VERƒ∞ Gƒ∞Rƒ∞≈ûƒ∞...";
            inp.autocomplete = "off";
            const btn = document.createElement('button');
            btn.innerText = "G√ñNDER";
            btn.className = "send-btn";
            btn.onclick = () => checkAns(inp.value);
            group.appendChild(inp);
            group.appendChild(btn);
            area.appendChild(group);
            inp.focus();
            inp.onkeypress = (e) => { if(e.key === "Enter") checkAns(inp.value); };
        }
        updateDist();
    }

    function checkAns(val) {
        const t = tasks[currentStep];
        let correct = false;

        if (t.type === "match_all") {
            const userWords = val.split(',').map(w => normalizeT(w));
            const targetWords = t.ans.map(w => normalizeT(w));
            correct = targetWords.length === userWords.length && targetWords.every(w => userWords.includes(w));
        } else {
            correct = normalizeT(val) === normalizeT(t.ans);
        }

        if (correct) {
            distance -= 10;
            if (distance < 5) distance = 5;
            currentStep++;
            loadScene(currentStep);
        } else {
            distance += 15;
            alert("HATALI ANALƒ∞Z! Dr. Paralel arayƒ± a√ßtƒ±!");
            updateDist();
        }
    }

    function letDrEscape() {
        distance += 50;
        currentStep++;
        loadScene(currentStep);
    }

    function updateDist() {
        const p = 100 - (distance > 100 ? 100 : distance);
        document.getElementById('player-icon').style.left = p + "%";
        document.getElementById('dist-text').innerText = `MESAFE: ${distance} KM`;
    }
</script>
</body>
</html>
